#include <stdio.h>
#include <stdlib.h>

// Функция foo выделяет память для указателя и присваивает значение 10
int foo(int **ptr) {
    *ptr = (int *)malloc(sizeof(int));  // Выделяем память для одного элемента типа int

    if (*ptr == NULL) {  // Проверяем, удалось ли выделить память
        fprintf(stderr, "Memory allocation failed\n");
        return -1;  // Возвращаем -1, если выделение памяти не удалось
    }
    **ptr = 10;  // Присваиваем значение 10 области памяти, на которую указывает *ptr
    return 0;  // Возвращаем 0, если все прошло успешно
}

int main() {
    int *ptr = NULL;  // Инициализируем указатель ptr значением NULL

    // Первый вызов foo: выделяем память и присваиваем значение 10
    if (foo(&ptr) != 0) {  /*Если foo возвращает ненулевое значение, значит произошла ошибка. 0 HERE IS A FUCKING
    RETURN CODE FROM ФУКЦНИИ FOO АХАХ КАКОГО XYZ!!!!
    THIS IS MOST IMPORTANT LINE OF CODE TO UNDERSTAND POINTERS*/ 
        return 0;  // Завершаем программу, если выделение памяти не удалось
    }

    // Выводим значение, на которое указывает ptr
    printf("Value: %d\n", *ptr);  // Разыменовываем указатель ptr, чтобы получить значение (ожидается 10)

    // Освобождаем выделенную память
    free(ptr);  // Освобождаем память, чтобы избежать утечки памяти

    return 0;  // Завершаем программу
}