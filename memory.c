#include <stdio.h>
#include <stdlib.h>

int main() {
    int pr = 10;          // Обычная переменная
    int *ptr = &pr;       // Указатель на p
    int **pptr = &ptr;   // Двойной указатель на ptr

    // Вывод значений для наглядности
    printf("Значение pr: %d\n", pr);
    printf("Значение через ptr: %d\n", *ptr);
    printf("Значение через pptr: %d\n", **pptr);
    

    // Выделение памяти для одного целого числа
    // Выделение памяти для одного int
    int* p = malloc(sizeof(int)); /* 	
    •	malloc(sizeof(int)) выделяет память размером sizeof(int) байт в динамической памяти (куче) и возвращает указатель типа void*.
	•	(int*) приводит void* к int*, чтобы p мог хранить адрес памяти для целого числа.
	•	p хранит адрес выделенной памяти.*/
    if (p == NULL) {
        perror("Не удалось выделить память");
        return 1;
    }

    // Присваивание значения 5 в выделенную память
    *p = 5;
    // Присваивание нового значения через указатель
    *p = 10;

    // Создание двойного указателя, указывающего на p
    int **pp = &p; 

    // Правильное использование спецификаторов формата и разыменования
    printf("%d\n", *p);       // Выводит 42
    printf("%p\n", (void*)p); // Выводит адрес, на который указывает p
    printf("%p\n", (void*)pp); // Выводит адрес переменной p
    printf("%d\n", **pp);     // Выводит 42 через двойное разыменование

    printf("Адрес указателя p: %p\n", (void*)&p);     // Адрес переменной p сама по себе (например, на стеке).
    printf("Адрес, на который указывает p: %p\n", (void*)p); // Адрес выделенной памяти

    // Освобождение выделенной памяти
    free(p); 

    int a = 10;        // Обычная переменная типа int
    int *pA = &a;       // Указатель p хранит адрес переменной a

    printf("Значение a: %d\n", a);        // Выводит: 10
    printf("Значение по указателю p: %d\n", *pA); // Разыменование p, выводит: 10

    *pA = 20;           // Изменяем значение a через указатель
    printf("Новое значение a: %d\n", a); // Выводит: 20

    return 0;
}
